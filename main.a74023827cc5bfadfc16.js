(self.webpackChunkreal_estate_map=self.webpackChunkreal_estate_map||[]).push([[179],{4639:(e,t)=>{"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SortType=t.Channel=t.PropertyType=void 0,(i=t.PropertyType||(t.PropertyType={})).townhouse="townhouse",i.unitApartment="unit+apartment",i.house="house",i.retirement="retire",i.blockOfUnits="unitblock",i.acreage="acreage",i.villa="villa",(r=t.Channel||(t.Channel={})).rent="rent",r.buy="buy",(n=t.SortType||(t.SortType={})).priceAsc="price-asc",n.priceDesc="price-desc"},773:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointsEqual=void 0,t.pointsEqual=function(e,t){return e.x===t.x&&e.y===t.y}},1797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tilesEqual=t.generateTileHash=void 0;var r=n(773);t.generateTileHash=function(e){var t=e.zoom,n=e.point,r=n.x,i=n.y;return"".concat(t,"-").concat(r,"-").concat(i)},t.tilesEqual=function(e,t){return e.zoom===t.zoom&&r.pointsEqual(e.point,t.point)}},2305:(e,t)=>{"use strict";function n(e,t){var n=t.latitude,r=t.longitude,i=Math.sin(n*Math.PI/180),o=Math.min(Math.max(i,-.9999),.9999);return{x:e*(.5+r/360),y:e*(.5-Math.log((1+o)/(1-o))/(4*Math.PI))}}function r(e,t){var n=t.x,r=t.y,i=Math.pow(Math.E,2*Math.PI),o=Math.pow(Math.E,4*r*Math.PI/e),a=(i-o)/(i+o);return{latitude:180*Math.asin(a)/Math.PI,longitude:360*(n/e-.5)}}function i(e,t,n){var r=n.x,i=n.y,o=1<<t;return{x:Math.floor(r*o/e),y:Math.floor(i*o/e)}}function o(e,t,n){var r=1<<t;return{x:n.x*e/r,y:n.y*e/r}}function a(e,t,r){return i(e,t,n(e,r))}function s(e,t,n){return r(e,o(e,t,n))}function u(e,t){return{x:e*t.x,y:e*t.y}}function l(e,t){var n=1<<e;return{x:t.x*n,y:t.y*n}}function c(e,t,n,r,i){for(var o=Math.floor((e+t)/2),a=Math.floor((n+r)/2),s=function(n){return n>=e&&n<=t},u=function(e){return e>=n&&e<=r},l=!0,c=0;l;c++){if(l=!1,u(a-c))for(var p=-c;p<=c;p++)s(o+p)&&(l=!0,i(o+p,a-c));if(s(o+c))for(var f=1-c;f<=c;f++)u(a+f)&&(l=!0,i(o+c,a+f));if(u(a+c))for(var h=c-1;h>=-c;h--)s(o+h)&&(l=!0,i(o+h,a+c));if(s(o-c))for(var d=c-1;d>-c;d--)u(a+d)&&(l=!0,i(o-c,a+d))}}function p(e,t,n,r){var i=[];return c(e,t,n,r,(function(e,t){return i.push({x:e,y:t})})),i}Object.defineProperty(t,"__esModule",{value:!0}),t.coordinateIsInsideArea=t.tileToArea=t.calculateVisibleTiles=t.generateSpiralCoordinates=t.spiralLoop=t.degreesToInnerTileCoordinates=t.worldPixelsToLocalPixels=t.localPixelsToWorldPixels=t.tileToLocalPixels=t.tilesToDegrees=t.degreesToTiles=t.tilesToPixels=t.pixelsToTiles=t.pixelsToDegrees=t.degreesToPixels=void 0,t.degreesToPixels=n,t.pixelsToDegrees=r,t.pixelsToTiles=i,t.tilesToPixels=o,t.degreesToTiles=a,t.tilesToDegrees=s,t.tileToLocalPixels=u,t.localPixelsToWorldPixels=function(e,t){var n=1<<e;return{x:t.x/n,y:t.y/n}},t.worldPixelsToLocalPixels=l,t.degreesToInnerTileCoordinates=function(e,t,r){var i=u(e,t.point),o=l(t.zoom,n(e,r));return{x:o.x-i.x,y:o.y-i.y}},t.spiralLoop=c,t.generateSpiralCoordinates=p,t.calculateVisibleTiles=function(e,t,n){var r=a(e,t,n.northWest),i=r.x,o=r.y,s=a(e,t,n.southEast);return p(i,s.x,o,s.y).map((function(e){return{point:e,zoom:t}}))},t.tileToArea=function(e,t){var n=t.zoom,r=t.point,i=r.x,o=r.y;return{northWest:s(e,n,{x:i,y:o}),southEast:s(e,n,{x:i+1,y:o+1})}},t.coordinateIsInsideArea=function(e,t){return e.latitude>=t.southEast.latitude&&e.latitude<=t.northWest.latitude&&e.longitude>=t.northWest.longitude&&e.longitude<=t.southEast.longitude}},6959:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toObservable=void 0;var i=n(4083),o=n(3432);t.toObservable=function(e){return i.isObservable(e)?e:e&&"object"===r(e)&&"function"==typeof e.then?o.fromPromise(e):i.of(e)}},7216:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasOverlay=void 0;var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,google.maps.OverlayView);var t,n,s,u,l=(s=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(s);if(u){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return o(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=l.call(this)).wrapper=n.createDiv(),n.orchestrator=t,n.setMap(e),n}return t=c,(n=[{key:"onAdd",value:function(){this.getPanes().overlayLayer.appendChild(this.wrapper),this.orchestrator.begin({overlayView:this,wrapper:this.wrapper}),this.getMap().addListener("zoom",(function(e){return console.log("event",e)}))}},{key:"draw",value:function(){}},{key:"onRemove",value:function(){this.orchestrator.reset(),this.wrapper.remove()}},{key:"createDiv",value:function(){var e=document.createElement("div");return e.style.position="absolute",e}}])&&r(t.prototype,n),c}();t.CanvasOverlay=s},1819:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.HeatmapApiRenderer=void 0;var i=n(655),o=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.radius=n,this.tileSize=r,this.searchOptions=i}var t,n;return t=e,(n=[{key:"renderTile",value:function(e){return i.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={searchOptions:JSON.stringify(this.searchOptions),tile:JSON.stringify(e),radius:"".concat(this.radius),tileSize:"".concat(this.tileSize)},t.next=3,fetch("".concat(this.url,"?").concat(this.createQueryString(n)));case 3:return r=t.sent,t.next=6,r.json();case 6:return i=t.sent,t.abrupt("return",new Uint8ClampedArray(i));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"createQueryString",value:function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}}])&&r(t.prototype,n),e}();t.HeatmapApiRenderer=o},3626:(e,t,n)=>{"use strict";var r=n(655);n(9890);var i=n(4639),o=n(7216),a=n(1819),s=n(8183),u=n(7576),l={channel:i.Channel.buy};google.maps.event.addDomListener(window,"load",(function(){return r.__awaiter(void 0,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("map")){e.next=3;break}throw new Error("Could not find #map element");case 3:n=new google.maps.Map(t,{zoom:13,center:{lat:-37.833552,lng:145.03358},mapTypeId:google.maps.MapTypeId.TERRAIN}),r=new a.HeatmapApiRenderer("https://australia-southeast1-real-estate-map-1546133439056.cloudfunctions.net/heatmap-generator",50,256,l),i=new u.CachingRenderer({renderer:r}),c=new s.BaseOrchestrator({renderer:i,tileSize:256}),new o.CanvasOverlay(n,c);case 8:case"end":return e.stop()}}),e)})))}))},8183:(e,t,n)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseOrchestrator=void 0;var a=n(6486),s=n(4083),u=n(8290),l=n(6959),c=n(773),p=n(1797),f=n(2305),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wrapper=null,this.overlayView=null,this.subscription=null,this.unsubscribed$=new s.Subject,this.layers=[],this.canvases=[],this.tileSize=t.tileSize,this.renderer=t.renderer}var t,n;return t=e,(n=[{key:"begin",value:function(e){this.overlayView=e.overlayView,this.wrapper=e.wrapper,this.subscription=this.initialize()}},{key:"reset",value:function(){this.wrapper=null,this.overlayView=null,this.layers.forEach((function(e){return e.element.remove()})),this.layers=[],this.canvases=[],this.unsubscribed$.next(),this.subscription&&this.subscription.unsubscribe()}},{key:"initialize",value:function(){var e=this;if(!this.overlayView)throw new Error("Could not initialize map. Overlay view was null");var t=this.observeEvent("zoom_changed").pipe(u.map((function(){return e.getMapZoom()})),u.startWith(this.getMapZoom())),n=this.observeEvent("bounds_changed").pipe(u.map((function(){return e.getMapBounds()})),u.startWith(this.getMapBounds())),i=s.combineLatest([t.pipe(u.distinctUntilChanged()),n.pipe(u.distinctUntilChanged())]).pipe(u.auditTime(16),this.publishNow()).pipe(u.map((function(t){var n=r(t,2),i=n[0],o=n[1];return e.getVisibleTiles(i,o)})),this.publishNow()),o=i.pipe(u.map((function(t){return t.filter((function(t){return e.canvases.every((function(e){var n=e.tile;return!p.tilesEqual(n,t)}))}))})),this.publishNow()).pipe(u.mergeMap((function(t){return s.from(t).pipe(u.map((function(t){return l.toObservable(e.renderer.renderTile(t)).pipe(u.map((function(e){return{image:e,tile:t}})),u.takeUntil(i.pipe(u.filter((function(e){return e.every((function(e){return!p.tilesEqual(e,t)}))})))),e.publishNow())})))}))),a=this.observeEvent("idle").subscribe((function(){e.layers.forEach((function(t){e.updateLayerPosition(t)&&e.updateTilePositions(t)}))})),c=o.pipe(u.mergeAll()).subscribe((function(t){e.findOrCreateLayer(t.tile.zoom),e.createAndRenderCanvas(t)})),h=i.subscribe((function(t){e.canvases=e.canvases.filter((function(n){var r=e.getMapZoom();if(n.tile.zoom===r){if(t.some((function(e){return p.tilesEqual(n.tile,e)})))return!0}else if(e.getVisibleTiles(n.tile.zoom,e.getMapBounds()).some((function(e){return p.tilesEqual(n.tile,e)})))return!0;return n.element.remove(),!1}))})),d=o.pipe(u.mergeAll()).subscribe((function(){var t=e.getMapZoom();e.canvases=e.canvases.filter((function(n){return n.tile.zoom===t||!!f.calculateVisibleTiles(e.tileSize,t,f.tileToArea(e.tileSize,n.tile)).some((function(t){return!e.canvases.some((function(e){return p.tilesEqual(t,e.tile)}))}))||(n.element.remove(),!1)}))}));return new s.Subscription((function(){c.unsubscribe(),a.unsubscribe(),h.unsubscribe(),d.unsubscribe()}))}},{key:"getVisibleTiles",value:function(e,t){return f.calculateVisibleTiles(this.tileSize,e,this.boundsToCoordinateArea(t))}},{key:"boundsToCoordinateArea",value:function(e){return{northWest:{longitude:e.west,latitude:e.north},southEast:{longitude:e.east,latitude:e.south}}}},{key:"createDiv",value:function(){var e=document.createElement("div");return e.style.position="absolute",e}},{key:"createCanvasElement",value:function(e){var t=document.createElement("canvas");return t.id=e,t.width=this.tileSize,t.height=this.tileSize,t.style.width="".concat(this.tileSize,"px"),t.style.height="".concat(this.tileSize,"px"),t.style.position="absolute",t}},{key:"findLayer",value:function(e){return this.layers.find((function(t){return t.zoom===e}))}},{key:"assignElementPosition",value:function(e,t){e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px")}},{key:"calculateLayerPosition",value:function(e){var t=this.getMapBounds(),n={latitude:a.mean([t.north,t.south]),longitude:a.mean([t.east,t.west])};return r(f.calculateVisibleTiles(this.tileSize,e,{northWest:n,southEast:n}),1)[0].point}},{key:"calculateLayerOffset",value:function(e,t){var n=this.getMapBounds(),r={latitude:a.mean([n.north,n.south]),longitude:a.mean([n.east,n.west])},i=f.tileToLocalPixels(this.tileSize,t),o=f.worldPixelsToLocalPixels(e,f.degreesToPixels(this.tileSize,r));return{x:i.x-o.x,y:i.y-o.y}}},{key:"updateLayerPosition",value:function(e){var t=this.calculateLayerPosition(e.zoom),n=this.calculateLayerOffset(e.zoom,t);return!c.pointsEqual(n,e.position)&&(this.assignElementPosition(e.element,n),e.position=t,!0)}},{key:"createLayer",value:function(e){if(!this.wrapper)throw new Error("Could not create a layer. Wrapper was null");var t=this.createDiv();t.id="layer-".concat(e),this.wrapper.appendChild(t);var n={zoom:e,element:t,position:{x:0,y:0}};return this.updateLayerPosition(n),this.layers.push(n),n}},{key:"findOrCreateLayer",value:function(e){return this.findLayer(e)||this.createLayer(e)}},{key:"findCanvas",value:function(e){var t=this.canvases.find((function(t){return p.tilesEqual(e,t.tile)}));return t?t.element:void 0}},{key:"calculateTilePosition",value:function(e,t){return{x:(e.point.x-t.x)*this.tileSize,y:(e.point.y-t.y)*this.tileSize}}},{key:"updateTilePosition",value:function(e,t,n){var r=this.calculateTilePosition(e,t);this.assignElementPosition(n,r)}},{key:"createCanvas",value:function(e){var t=this.findLayer(e.zoom);if(!t)throw new Error("Could not find layer for zoom ".concat(e.zoom));var n=this.createCanvasElement(p.generateTileHash(e));return this.updateTilePosition(e,t.position,n),t.element.appendChild(n),this.canvases.push({tile:e,element:n}),n}},{key:"findOrCreateCanvas",value:function(e){return this.findCanvas(e)||this.createCanvas(e)}},{key:"renderImageToCanvas",value:function(e,t){var n=t.getContext("2d");if(n){var r=n.createImageData(this.tileSize,this.tileSize);r.data.set(e),n.putImageData(r,0,0)}else console.error("Could not render image to canvas. Context was null")}},{key:"createAndRenderCanvas",value:function(e){var t=this.findOrCreateCanvas(e.tile);return this.renderImageToCanvas(e.image,t),t}},{key:"updateTilePositions",value:function(e){var t=this;this.canvases.forEach((function(n){t.updateTilePosition(n.tile,e.position,n.element)}))}},{key:"publishNow",value:function(e){var t=this;return function(e){var n=u.publish()(e.pipe(u.takeUntil(t.unsubscribed$)));return n.connect(),n}}},{key:"observeEvent",value:function(e){var t=this;return new s.Observable((function(n){var r=t.getPlainMap().addListener(e,(function(e){return n.next(e)}));return function(){return r.remove()}}))}},{key:"getMapZoom",value:function(){return this.getPlainMap().getZoom()}},{key:"getMapBounds",value:function(){var e=this.getPlainMap().getBounds();if(!e)throw Error("Invalid bounds");return e.toJSON()}},{key:"getPlainMap",value:function(){if(!this.overlayView)throw new Error("Could not retrieve map. Overlay view was null");var e=this.overlayView.getMap();if(!(e instanceof google.maps.Map))throw Error("Cannot get the bounds of the map. Map class is incorrect.");return e}}])&&o(t.prototype,n),e}();t.BaseOrchestrator=h},7576:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.CachingRenderer=void 0;var i=n(1797),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={},this.renderer=t.renderer}var t,n;return t=e,(n=[{key:"renderTile",value:function(e){var t=i.generateTileHash(e);return t in this.cache||(this.cache[t]=this.renderer.renderTile(e)),this.cache[t]}}])&&r(t.prototype,n),e}();t.CachingRenderer=o},9163:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4015),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,"/* Optional: Makes the sample page fill the window. */\nhtml, body {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n\n/* Always set the map height explicitly to define the size of the div\n * element that contains the map. */\n#map {\n  height: 100%;\n}\n","",{version:3,sources:["webpack://./src/ui/index.css"],names:[],mappings:"AAAA,qDAAqD;AACrD;EACE,YAAY;EACZ,SAAS;EACT,UAAU;AACZ;;AAEA;mCACmC;AACnC;EACE,YAAY;AACd",sourcesContent:["/* Optional: Makes the sample page fill the window. */\nhtml, body {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n\n/* Always set the map height explicitly to define the size of the div\n * element that contains the map. */\n#map {\n  height: 100%;\n}\n"],sourceRoot:""}]);const s=a},9890:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(3379),i=n.n(r),o=n(9163);i()(o.Z,{insert:"head",singleton:!1});const a=o.Z.locals||{}}},0,[[3626,666,216]]]);
//# sourceMappingURL=main.a74023827cc5bfadfc16.js.map